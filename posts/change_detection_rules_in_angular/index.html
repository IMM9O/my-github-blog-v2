<!DOCTYPE html><html domain="imm9o.github.io/" lang="en"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><meta content="default-src 'self';object-src 'none';script-src 'self' 'sha256-Ky9qZOPnMhQV/s7Fdb9TYAOfU4KtWNqCZaFK8tSzXa0=';style-src 'unsafe-inline';img-src 'self' data:" http-equiv="Content-Security-Policy"><link href="/assets/img/favicon/favicon-192x192.png?hash=2089033c93" rel="icon" type="image/png"><meta content="#f9c412" name="theme-color"><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name="robots"><title>Change detection rules in angular</title><meta content="Change detection rules in angular" property="og:title"><meta content="What makes angular running change detection and how to optimize it" name="description"><meta content="What makes angular running change detection and how to optimize it" property="og:description"><meta content="summary_large_image" name="twitter:card"><meta content="@imm9oo" name="twitter:site"><meta content="@imm9oo" name="twitter:creator"><meta content="https://imm9o.github.io//assets/img/remote/1Gveuc-photo-1499244571948-7ccddb3583f1.jpg" property="og:image"><link href="https://imm9o.github.io//posts/change_detection_rules_in_angular/" rel="canonical"><meta content="no-referrer-when-downgrade" name="referrer"><link href="/feed/feed.xml" rel="alternate" type="application/atom+xml" title="IMM9O Blog"><link href="/" rel="preconnect" crossorigin=""><script async="" defer="" src="/assets/js/min.js?hash=54e8a28837"></script><script csp-hash="sha256-Ky9qZOPnMhQV/s7Fdb9TYAOfU4KtWNqCZaFK8tSzXa0=">if (/Mac OS X/.test(navigator.userAgent))document.documentElement.classList.add('apple')</script><style>:root{--primary: #E7BF60;--primary-dark: #f9c412;--main-width: calc(100vw - 3em)}main img{content-visibility:auto}header nav{position:fixed;padding:.375em 1.5em;background:rgba(255,255,255,.9);font-weight:200;text-align:right}@media (min-width:37.5em){:root{--main-width: calc(37.5em - 3em)}}dialog,share-widget{position:fixed;opacity:.9}share-widget{right:20px;bottom:20px}share-widget div{width:30px;height:30px;background-image:url(/assets/img/share.svg);background-repeat:no-repeat;background-position:center}.apple share-widget div{background-image:url(/assets/img/share-apple.svg)}body,share-widget button{margin:0}share-widget button:active{transform:scale(1.2)}dialog{background-color:#8dff80}header aside{font-style:italic}#nav{z-index:2;position:relative}#reading-progress,header nav{z-index:1;width:100vw;left:0;top:0}#reading-progress{background-color:var(--primary);position:absolute;bottom:0;transform:translate(-100vw,0);will-change:transform;pointer-events:none}#posts li{margin-bottom:.5em}@font-face{font-display:swap;font-family:'Inter UI';font-style:normal;font-weight:100;src:url(/assets/fonts/Inter-Thin.woff2) format("woff2"),url(/assets/fonts/Inter-Thin.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:italic;font-weight:100;src:url(/assets/fonts/Inter-ThinItalic.woff2) format("woff2"),url(/assets/fonts/Inter-ThinItalic.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:normal;font-weight:200;src:url(/assets/fonts/Inter-ExtraLight.woff2) format("woff2"),url(/assets/fonts/Inter-ExtraLight.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:italic;font-weight:200;src:url(/assets/fonts/Inter-ExtraLightItalic.woff2) format("woff2"),url(/assets/fonts/Inter-ExtraLightItalic.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:normal;font-weight:300;src:url(/assets/fonts/Inter-Light.woff2) format("woff2"),url(/assets/fonts/Inter-Light.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:italic;font-weight:300;src:url(/assets/fonts/Inter-LightItalic.woff2) format("woff2"),url(/assets/fonts/Inter-LightItalic.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:normal;font-weight:400;src:url(/assets/fonts/Inter-Regular.woff2) format("woff2"),url(/assets/fonts/Inter-Regular.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:italic;font-weight:400;src:url(/assets/fonts/Inter-Italic.woff2) format("woff2"),url(/assets/fonts/Inter-Italic.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:normal;font-weight:500;src:url(/assets/fonts/Inter-Medium.woff2) format("woff2"),url(/assets/fonts/Inter-Medium.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:italic;font-weight:500;src:url(/assets/fonts/Inter-MediumItalic.woff2) format("woff2"),url(/assets/fonts/Inter-MediumItalic.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:normal;font-weight:600;src:url(/assets/fonts/Inter-SemiBold.woff2) format("woff2"),url(/assets/fonts/Inter-SemiBold.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:italic;font-weight:600;src:url(/assets/fonts/Inter-SemiBoldItalic.woff2) format("woff2"),url(/assets/fonts/Inter-SemiBoldItalic.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:normal;font-weight:700;src:url(/assets/fonts/Inter-Bold.woff2) format("woff2"),url(/assets/fonts/Inter-Bold.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:italic;font-weight:700;src:url(/assets/fonts/Inter-BoldItalic.woff2) format("woff2"),url(/assets/fonts/Inter-BoldItalic.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:normal;font-weight:800;src:url(/assets/fonts/Inter-ExtraBold.woff2) format("woff2"),url(/assets/fonts/Inter-ExtraBold.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:italic;font-weight:800;src:url(/assets/fonts/Inter-ExtraBoldItalic.woff2) format("woff2"),url(/assets/fonts/Inter-ExtraBoldItalic.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:normal;font-weight:900;src:url(/assets/fonts/Inter-Black.woff2) format("woff2"),url(/assets/fonts/Inter-Black.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:italic;font-weight:900;src:url(/assets/fonts/Inter-BlackItalic.woff2) format("woff2"),url(/assets/fonts/Inter-BlackItalic.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI var alt';font-weight:100 900;font-style:normal;font-named-instance:'Regular';src:url(/assets/fonts/Inter-roman.var.woff2) format("woff2")}@font-face{font-display:swap;font-family:'Inter UI var alt';font-weight:100 900;font-style:italic;font-named-instance:'Italic';src:url(/assets/fonts/Inter-italic.var.woff2) format("woff2")}button,html{line-height:1.15}html{-webkit-text-size-adjust:100%}h1{font-size:3em;line-height:1.25;margin:.67em 0 .5em;font-size:2.074rem}a{background-color:transparent;color:#f9c412;text-decoration:none;color:var(--primary)}code{overflow-x:auto;border-radius:.3em;color:#e2777a;padding:0 .3em;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:90%;background:#2d2d2d}small{font-size:80%;color:#ccc}img{border-style:none;max-width:100%;height:auto;margin:0 auto}button{font-family:inherit;font-size:100%;overflow:visible;text-transform:none}[type=button],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}template{display:none}h2{font-size:2.5em;line-height:1.2;margin-bottom:.6em}body,p,ul{font-size:1em}p,ul{margin-bottom:1.5em}h1,h2{line-height:2.4rem;margin-bottom:1.36rem}h2{font-size:1.728rem}body,p,ul{font-size:1rem;line-height:1.6}p,ul{margin-bottom:1.36rem}@media (min-width:600px){h1{font-size:4.3978rem;line-height:4.4rem}h2{font-size:3.1097rem;line-height:3.52rem}body,p,ul{font-size:1.1rem;line-height:1.6}h1,h2,p,ul{margin-bottom:1.496rem}}@media (min-width:1200px){h1{font-size:6.0756rem;line-height:6.72rem}h2{font-size:4.05rem;line-height:4.8rem}body,p,ul{font-size:1.2rem;line-height:1.6}h1,h2,p,ul{margin-bottom:1.632rem}}h1,h2,html{font-family:Inter UI,sans-serif}h2{font-style:italic}a:hover{text-decoration:underline}@supports (font-variation-settings:normal){html{font-family:Inter UI var alt,sans-serif}}button{border-radius:.3em;max-width:100%;background:#f2f2f2;color:#191919;cursor:pointer;display:inline-block;padding:.75em 1.5em;text-align:center;margin:0 .75em 1.5em 0}button:hover{background:#d9d9d9;color:#000}button:not([disabled]){background:#f9c412;color:#181818;background:var(--primary)}button:not([disabled]):hover{background:#ba9005;color:#000;background:var(--primary-dark)}*{border:0;box-sizing:border-box}body,header nav a{font-family:Inter UI,sans-serif}body{background:#181818;color:#eee}header{padding:4.5em 1.5em 3em;width:37.5em;margin:0 auto;text-align:center;max-width:100%;display:flex;align-items:center;flex-direction:column}header p,ul{margin-top:0}header nav h1{float:left;font-size:inherit;line-height:inherit;margin:0;text-align:left}header nav a{font-weight:700;text-decoration:none;color:#181818;margin-left:1.5em}header nav a:first-of-type{margin-left:auto}header nav a:last-of-type{margin-right:1.5em}main{max-width:70rem;margin:0 auto;border-top:.5px solid #ccc}footer{background:rgba(0,0,0,.8);color:#fff;padding:3em;text-align:center}footer>*{margin:1.5em}footer nav a img{vertical-align:middle}footer nav,footer p{font-size:90%}article{max-width:100%;padding:1.5em;width:37.5em;margin:0 auto}li ul{margin-bottom:0}blockquote{border-left:1px solid #f9c412;padding:0 1.5em;margin:1.5em 0 1.5em 1.5em;border-left:1px solid var(--primary)}blockquote footer{background:0 0;display:block;color:#ccc;padding:.75em 0;font-size:90%;text-align:start}</style></head><body><header><nav><div id="nav"><h1><a href="/" title="Homepage">IMM9O Blog</a></h1><a href="/about/">About</a></div><div id="reading-progress" aria-hidden="true"></div></nav><h1>Change detection rules in angular</h1><aside>🍿 2 min. read</aside><dialog id="message"></dialog></header><main><article><center><p><img alt="change" src="/assets/img/remote/1Gveuc-photo-1499244571948-7ccddb3583f1.jpg"><br><span><small>Photo by <a href="https://unsplash.com/@rossf?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Ross Findon</a> on <a href="https://unsplash.com/photos/mG28olYFgHI">Unsplash</a></small></span></p></center><blockquote><p>What makes angular running change detection and how to optimize it</p></blockquote><h2 id="what-is-change-detection%3F">What is change detection? <a href="#what-is-change-detection%3F" class="direct-link">#</a></h2><p>Change detection is the mechanism designed to track changes in an application state and render the updated state on the screen. It ensures that the user interface always stays in sync with the internal state of the program.</p><h2 id="how-change-detections-work-in-angular%3F">How change detections work in angular? <a href="#how-change-detections-work-in-angular%3F" class="direct-link">#</a></h2><p>Angular uses <a href="https://indepth.dev/posts/1059/do-you-still-think-that-ngzone-zone-js-is-required-for-change-detection-in-angular">ZoneJS</a> to intercept events that occurred in the application and run a change detection cycle automatically.</p><p>We can reduce events that angular intercept by changing <code>ChangeDetectionStrategy</code> in component decorator to <code>ChangeDetectionStrategy.OnPush</code></p><p>ChangeDetectionStrategy.OnPush tells Angular that the component only depends on its @inputs() ( aka pure ) and needs to be checked only in the following cases:</p><p>1️⃣ The Input reference changes.<br>2️⃣ An event originated from the component or one of its children. ( The rule applies only to DOM events)<br>3️⃣ We run change detection explicitly.<br>4️⃣ Observable emits a new value inside the component template.</p><h2 id="how-to-optimize-running-of-change-detection">How to optimize running of change detection <a href="#how-to-optimize-running-of-change-detection" class="direct-link">#</a></h2><ul><li>Always use <code>OnPush</code> Change Detection Strategy.</li><li>Always use <a href="https://medium.com/javascript-in-plain-english/how-to-deep-copy-objects-and-arrays-in-javascript-7c911359b089">immutable</a> data because once you set component to <code>OnPush</code> strategy angular will use <a href="https://javascript.info/object-copy">shallow</a> comparison to detect change and perform the reRender task.</li><li>Prevent unnecessary emits in observables inside component.</li><li>Prevent triggers unnecessary async task like scrolling using technics like <a href="https://levelup.gitconnected.com/debounce-in-javascript-improve-your-applications-performance-5b01855e086">Debounce</a> or <a href="https://levelup.gitconnected.com/throttle-in-javascript-improve-your-applications-performance-984a4e020a3f">Throttle</a>.</li><li>Reduce the amount of <a href="https://web.dev/optimize-fid/">long tasks</a> by moving it to <a href="https://blog.bitsrc.io/angular-performance-web-workers-df382c4d3919">Web Workers</a>.</li><li>Use <a href="https://medium.com/@krzysztof.grzybek89/how-runoutsideangular-might-reduce-change-detection-calls-in-your-app-6b4dab6e374d">runOutsideAngular</a> when starting a work consisting of one or more asynchronous tasks that don't require UI.</li></ul><h1>🙏🙏🙏</h1><p>Since you've made it this far, <a href="https://imm9o.github.io//posts/change_detection_rules_in_angular/" on-click="share">sharing</a> this article on your favorite social media network would be highly appreciated 💖! For feedback, please <a href="https://twitter.com/imm9oo" rel="noopener" target="_blank">ping me on Twitter.</a></p><share-widget><button aria-label="Share" href="https://imm9o.github.io//posts/change_detection_rules_in_angular/" on-click="share"><div></div></button></share-widget><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Change detection rules in angular","image":["https://imm9o.github.io/https://images.unsplash.com/photo-1499244571948-7ccddb3583f1?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=1489&q=80"],"author":"Islam Muhammad","genre":"Insert a schema.org genre","publisher":{"@type":"Organization","name":"IMM9O","logo":{"@type":"ImageObject","url":"/assets/img/favicon/favicon-192x192.png?hash=2089033c93"}},"url":"https://imm9o.github.io//posts/change_detection_rules_in_angular/","mainEntityOfPage":"https://imm9o.github.io//posts/change_detection_rules_in_angular/","datePublished":"2021-01-03","dateModified":"2022-06-16","description":"Photo by Ross Findon on Unsplash What makes angular running change detection and how to optimize it What is change detection? # Change..."}</script><p>Published <time datetime="2021-01-03">03 Jan 2021</time></p></article></main><footer><a href="/about/">Islam Muhammad</a></footer></body></html>